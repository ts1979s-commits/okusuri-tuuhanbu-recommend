# RAG設計書 - お薬通販部商品レコメンドAI

## 📋 **RAG（Retrieval-Augmented Generation）概要**

本ドキュメントは、FAISSを活用したRAG（ベクトル検索＋生成AI）機能の設計・拡張用サンプルです。

> **現状の運用ではRAG/FAISSは未使用・オプションです。Web UI（Streamlit）による通常検索がメインです。今後の拡張用としてご活用ください。**

---

## 🏗️ **RAGアーキテクチャ設計（拡張用サンプル）**

- FAISSベクトル検索＋OpenAI埋め込みAPIによる意味検索の設計例です。
- 利用時はAPIキーや追加パッケージ（faiss, openai等）が必要です。

### システム構成図（例）
```
ユーザークエリ → 埋め込み生成(OpenAI) → ベクトル検索(FAISS) → 類似商品リスト → UI表示
```

---

## 🔧 **技術実装詳細（拡張用サンプル）**

- FAISSRAGSystemクラスや埋め込み生成、検索実行のサンプルコードは現状未導入・拡張用です。
- 実際の運用では、Web UIの通常検索（pandasによる文字列マッチ）がメインです。

---

## 🗄️ **データ構造設計（現状/拡張用）**

- 商品データはCSV/NDJSON/SQLite等で管理
- RAG/FAISS利用時は、埋め込みベクトル・メタデータ・インデックスファイルを追加生成

---

## 🔍 **検索アルゴリズム（拡張用サンプル）**

- コサイン類似度・内積類似度・ランキング調整等のサンプルコードを記載
- 現状は未導入。今後の精度向上やAI検索拡張時に参考にしてください

---

## ⚡ **パフォーマンス・キャッシュ・最適化（拡張用）**

- キャッシュ戦略やインデックス最適化例も拡張用サンプルです
- 現状の運用では未使用

---

## 📊 **評価・テスト設計（拡張用）**

- 検索精度評価・テストケース例も拡張用サンプルです
- 現状の運用では未実施

---

## 🔧 **設定・パラメータ例（拡張用）**

- 検索パラメータやブーストファクター例も拡張用サンプルです
- 現状の運用では未設定

---

## 🛡️ **エラーハンドリング・フォールバック（拡張用）**

- RAG検索失敗時のフォールバックや例外処理例も拡張用サンプルです
- 現状の運用では未使用

---

## 🚀 **デプロイ・運用設定（拡張用）**

- RAG/FAISS利用時はAPIキーや追加パッケージが必要です
- 本番運用時はキャッシュ・監視・ログ設計もご検討ください

---

## 📈 **今後の改善計画・拡張方針**

- RAG/FAISSによる意味検索・AIレコメンドは今後の拡張候補です
- 現状はWeb UIによる通常検索がメインです
- 拡張時は本設計書のサンプルを参考に実装・運用を進めてください

---

**（本設計書は拡張用サンプルです。現状の運用ではRAG/FAISSは未使用です）**